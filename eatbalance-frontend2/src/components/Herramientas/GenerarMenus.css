/* =======================
   Scope / variables base
   ======================= */
.gm-wrap {
  --bg: #ffffff;
  --text: #0b1220;
  --muted: #475569;
  --primary: #2563eb;
  --border: #e5e7eb;
  --accent: #eef2ff;

  padding: 16px;
  color: var(--text);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;

  /* Sticky footer en esta página */
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}
.gm-wrap::after { content: ""; flex: 1 1 auto; }

/* =======================
   Panel de parámetros
   ======================= */
.gm-panel{
  background: rgba(255,255,255,.95);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 16px;
  /* separa del hero para que respire */
  margin: clamp(28px, 4.5vh, 64px) 0 14px;
}
.gm-panel h2 { margin: 0 0 10px; }

.gm-grid {
  display: grid;
  grid-template-columns: repeat(6, minmax(0, 180px));
  gap: 10px;
}
.gm-field label { display:block; font-size: 12px; color: var(--muted); margin: 0 0 4px; }
.gm-field input, .gm-field select {
  width: 100%;
  padding: 8px 10px;
  border: 1px solid var(--border);
  border-radius: 10px;
  background: #fff;
  color: var(--text);
}
.gm-actions { display:flex; gap: 10px; align-items: center; margin-top: 12px; }
.gm-btn {
  padding: 10px 14px;
  border: 1px solid var(--border);
  background: #fff;
  color: var(--text);
  border-radius: 10px;
  cursor: pointer;
}
.gm-btn:hover { background: #f8fafc; }
.gm-btn.gm-primary {
  background: var(--primary);
  border-color: var(--primary);
  color: #fff;
}
.gm-btn.gm-primary:hover { filter: brightness(0.95); }
.gm-error { color: #b91c1c; font-weight: 600; }

.gm-debug { margin-top: 8px; }
.gm-debug summary { cursor: pointer; }
.gm-debug pre {
  white-space: pre-wrap;
  background: #fff;
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 8px;
  margin: 6px 0 0;
  color: var(--text);
}

/* =======================
   Buckets de opciones
   ======================= */
.gm-bucket {
  background: rgba(255,255,255,.95);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 12px;
  margin-bottom: 12px;
}
.gm-bucket-head {
  display:flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 8px;
}
.gm-target { color: var(--muted); font-size: 14px; }
.gm-empty {
  color: var(--text);
  background: rgba(255,255,255,.9);
  border: 1px dashed var(--border);
  border-radius: 12px;
  padding: 10px;
}

/* =======================
   Cards de opciones
   ======================= */
.gm-cards {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px,1fr));
  gap: 10px;
}
.gm-card {
  background: #fff;
  border: 1px solid #cbd5e1;
  border-radius: 12px;
  padding: 10px;
  display:flex;
  flex-direction: column;
  gap: 8px;
}
.gm-card.is-selected {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px var(--accent);
  background: var(--accent);
}
.gm-card-head {
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 8px;
}
.gm-card-head h4 { margin: 0; font-size: 16px; }
.gm-items { display:flex; flex-direction: column; gap: 6px; }
.gm-row { display:flex; align-items:center; justify-content: space-between; border-top: 1px solid var(--border); padding-top: 6px; }
.gm-row:first-child { border-top: none; padding-top: 0; }
.gm-food { color: var(--text); }
.gm-grams { color: var(--muted); }
.gm-card-foot { display:flex; justify-content: space-between; align-items:center; }
.gm-badge { font-size: 12px; color: #065f46; background: #ecfdf5; border: 1px solid #a7f3d0; padding: 2px 6px; border-radius: 999px; }
.gm-score { font-weight: 600; color: var(--muted); }

/* =======================
   Plan final
   ======================= */
.gm-final-block {
  border: 1px solid var(--border);
  border-radius: 12px;
  background: #fff;
  padding: 12px;
  margin-bottom: 10px;
}
.gm-final-head { display:flex; justify-content: space-between; align-items: baseline; margin-bottom: 6px; }
.gm-final-name { font-weight: 600; margin-bottom: 6px; }
.gm-table { width: 100%; border-collapse: collapse; }
.gm-table th, .gm-table td { padding: 6px 4px; border-top: 1px solid var(--border); }
.gm-table thead th { border-top: none; color: var(--muted); text-align: left; }
.t-right { text-align: right; }
.gm-achieved { margin-top: 6px; color: #065f46; font-weight: 600; }
.gm-muted { color: var(--muted); }

/* =======================
   Animación suave
   ======================= */
.gm-anim { opacity: 0; transform: translateY(10px) scale(0.98); transition: all .35s ease; }
.gm-anim.visible { opacity: 1; transform: none; }
/* HOTFIX: por si el observer no entra */
.gm-anim, .gm-anim.visible, .gm-anim.is-in { opacity: 1 !important; transform: none !important; }

/* Responsive */
@media (max-width: 900px) {
  .gm-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}

/* =======================
   HERO (foto llena + logo nítido, sin “mango” detrás del título
   y sin hojita recortada a la derecha)
   ======================= */
.gm-hero{
  /* Altura del hero */
  --hero-h: clamp(420px, 48vh, 620px);
  /* Ligero zoom-out del logo nítido (0.90 = 90% del ancho) */
  --logo-zoom: 0.90;
  /* Encadre vertical del logo nítido */
  --logo-y: 52%;
  /* Espacio inferior del hero antes del panel */
  --gap-after-hero: clamp(24px, 4vh, 56px);

  position: relative;
  min-height: var(--hero-h);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 18px;
  margin: 0 0 var(--gap-after-hero) 0;
  overflow: hidden;
  background:
    /* scrim para el texto */
    linear-gradient(90deg, rgba(0,0,0,.60) 0%, rgba(0,0,0,.30) 36%, rgba(0,0,0,0) 72%),
    linear-gradient(180deg,#f8fafc 0%,#eef2f7 100%);
}

/* Capa trasera: imagen en cover NÍTIDA para llenar el hero */
.gm-hero::before{
  content: "";
  position: absolute;
  inset: 0;
  background: url("/logo-eatbalance.png") center / cover no-repeat;
  z-index: 0;

  /* Máscara para borrar el “recorte”/hojita del borde derecho */
  -webkit-mask-image: linear-gradient(90deg, #000 0 96%, transparent 100%);
  mask-image: linear-gradient(90deg, #000 0 96%, transparent 100%);
}

/* Capa delantera: logo nítido SIN recortar con ligero zoom-out */
.gm-hero::after{
  content: "";
  position: absolute;
  inset: 0;
  background: url("/logo-eatbalance.png") center var(--logo-y) /
              min(calc(var(--logo-zoom) * 100%), 1200px) auto no-repeat;
  z-index: 1;

  /* Máscara para limpiar la zona del título (el “mango” del tenedor)
     y quitar sobras del extremo derecho */
  -webkit-mask-image: linear-gradient(
      90deg,
      transparent 0,
      transparent 18%,   /* oculta ~18% izquierda (detrás del título) */
      #000 26%,
      #000 94%,
      transparent 100%   /* difumina ~6% derecha */
  );
  mask-image: linear-gradient(
      90deg,
      transparent 0,
      transparent 18%,
      #000 26%,
      #000 94%,
      transparent 100%
  );
}

/* Contenido del hero por encima de todo */
.gm-hero-inner, .gm-hero h1, .gm-hero p { position: relative; z-index: 2; }

/* Caja “glass” para el texto del hero */
.gm-hero-inner{
  display: inline-block;
  max-width: 980px;
  padding: 18px 22px;
  border-radius: 16px;
  background: linear-gradient( to right, rgba(0,0,0,.55), rgba(0,0,0,.28) );
  backdrop-filter: blur(4px);
  box-shadow: 0 10px 30px rgba(0,0,0,.25);
}

/* Título y subtítulo (estilo más “bio”) */
.gm-title{
  margin: 0 0 6px;
  font-weight: 900;
  letter-spacing: .3px;
  line-height: 1.05;
  font-size: clamp(28px, 4.2vw, 56px);
  color: #fff;
  text-shadow: 0 6px 22px rgba(0,0,0,.35);
}
.gm-title .accent{
  /* gradiente verde bio */
  background: linear-gradient(90deg,#34d399 0%,#22c55e 45%,#84cc16 90%);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  filter: drop-shadow(0 4px 10px rgba(0,0,0,.35));
}
.gm-title .accent::after{
  content:"";
  display:block;
  height: 6px;
  width: 56%;
  margin-top: 8px;
  border-radius: 999px;
  background: linear-gradient(90deg,#34d399,#22c55e,#84cc16);
  opacity:.8;
}
.gm-subtitle{
  margin: 0;
  font-size: clamp(14px, 1.6vw, 18px);
  color: #eaf2ff;
  opacity: .95;
}

/* 1) Mata capas previas que recortaban la imagen del hero */
.gm-hero::before,
.gm-hero::after {
  content: none !important;
  background: none !important;
  -webkit-mask-image: none !important;
  mask-image: none !important;
  filter: none !important;
  transform: none !important;
}

/* 2) Hero limpio: una foto, scrim a la izquierda y fade a la derecha */
.gm-hero{
  /* altura y separación inferior (ajusta si quieres) */
  --hero-h: clamp(420px, 48vh, 620px);
  --gap-after-hero: clamp(24px, 4vh, 56px);

  position: relative;
  min-height: var(--hero-h);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 18px;
  margin: 0 0 var(--gap-after-hero) 0;
  overflow: hidden;

  /* CAPAS (de arriba a abajo):
     1) scrim oscuro a la izquierda para el título (oculta el tenedor detrás)
     2) desvanecido a la derecha al color de fondo (oculta el “)” del borde)
     3) foto del logo
     4) fondo de relleno por si sobrara espacio */
  background-image:
    linear-gradient(90deg, rgba(0,0,0,.62) 0 34%, rgba(0,0,0,0) 60%),
    linear-gradient(90deg, transparent 0 96%, #eef2f7 98%, #eef2f7 100%),
    url("/logo-eatbalance.png"),
    linear-gradient(180deg,#f8fafc 0%, #eef2f7 100%);
  background-repeat: no-repeat, no-repeat, no-repeat, no-repeat;
  background-size:
    100% 100%,             /* scrim cubre todo */
    100% 100%,             /* fade cubre todo */
    cover,                 /* foto llena el contenedor */
    100% 100%;             /* fondo de relleno */
  background-position:
    left center,           /* scrim */
    left center,           /* fade right */
    center center,         /* foto */
    center center;         /* fondo */
}

/* Pegado arriba en Generar Menús */
html, body { margin: 0; } /* por si acaso */

.gm-wrap {
  /* quitamos el padding superior pero mantenemos laterales e inferior */
  padding: 0 16px 16px !important;
}

/* el hero sin margen arriba y sin esquinas redondeadas superiores */
.gm-hero {
  margin-top: 0 !important;
  border-top-left-radius: 0;
  border-top-right-radius: 0;
}


/* ===== Underlines y compacidad del título (Generar Menús) ===== */
.gm-title{
  margin: 0 0 4px !important;
  line-height: 1.02;
}

/* Parte blanca: “Generar” con subrayado blanco */
.gm-title .lead{
  position: relative;
  display: inline-block;
}
.gm-title .lead::after{
  content: "";
  display: block;
  height: 6px;
  width: 100%;
  max-width: 420px;           /* evita que se pase demasiado */
  margin-top: 4px;            /* subrayado más pegado */
  border-radius: 999px;
  background: rgba(255,255,255,.95);
  opacity: .95;
}

/* Ajuste del subrayado verde para .accent (“Menús”) */
.gm-title .accent::after{
  width: 100%;                /* que siga el ancho del texto */
  margin-top: 4px;            /* más pegado al texto */
}


/* ===== Título más limpio y equilibrado ===== */
.gm-title{
  margin: 0 0 2px !important;
  line-height: 1.02;
}
.gm-title .lead,
.gm-title .accent{
  position: relative;
  display: inline-block;
  padding-bottom: 2px;                  /* acerca el subrayado al texto */
}

/* Subrayado base */
.gm-title .lead::after,
.gm-title .accent::after{
  content: "";
  position: absolute;
  bottom: -3px;                         /* muy pegado al texto */
  height: 4px;                          /* más fino */
  border-radius: 999px;
}

/* “Generar” – blanco corto y centrado */
.gm-title .lead::after{
  left: 4%;
  right: 4%;                            /* ≈92% del ancho de la palabra */
  background: rgba(255,255,255,.92);
}

/* “Menús” – verde exacto del ancho del texto */
.gm-title .accent::after{
  left: 0; right: 0;
  background: linear-gradient(90deg,#34d399 0%,#22c55e 50%,#84cc16 100%);
}

/* Compacidad del bloque */
.gm-subtitle{
  margin-top: 4px !important;           /* menos aire con el título */
}
